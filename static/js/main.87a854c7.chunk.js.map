{"version":3,"sources":["../../src/ScheduleItem.jsx","../../src/ScheduleRow.jsx","../../node_modules/immer/dist/immer.module.js","../../src/Schedule.jsx","App.js","index.js"],"names":["ScheduleItem","React","constructor","props","super","this","onPositionUpdated","bind","onSizeUpdated","computeStartX","computeStartDate","computeThread","onRightClick","y","grid","inc","Math","startDate","weeks","startDay","moment","week","o","startWeek","x","startsInWeek","startsOnDay","gridStartDate","itemStartDate","id","size","newDays","days","onRemoved","start","thread","position","e","colors","nextColor","render","bounds","onContextMenu","onResizeStop","direction","ref","delta","widthDelta","width","onDragStop","d","enableResizing","right","left","height","dragGrid","resizeGrid","className","styles","style","background","scheduleItemDate","placeholder","title","onSave","type","Types","hideSaveButton","hideCancelButton","saveOnBlur","attributes","name","ScheduleRow","onDurationUpdated","onTitleUpdated","onColorUpdated","index","item","rowId","itemIndex","duration","dimensions","color","threads","backgroundSize","filterOffset","display","src","alt","onDoubleClick","onRowClicked","items","map","i","key","obj","value","_typeof","Symbol","iterator","prototype","createClass","defineProperties","target","length","descriptor","enumerable","configurable","writable","Object","defineProperty","Constructor","protoProps","staticProps","NOTHING","DRAFT_STATE","isDraft","isDraftable","Array","isArray","proto","getPrototypeOf","assign","has","shallowCopy","slice","undefined","__proto__","create","each","cb","thing","prop","hasOwnProperty","call","is","generatePatches","state","basePath","patches","inversePatches","base","copy","assigned","minLength","min","path","concat","push","op","_i","_i2","generateArrayPatches","assignedValue","origValue","generateObjectPatches","descriptors","scopes","currentScope","createDraft","parent","draft","_state","finalizing","get","assertUnrevoked","source","prepareCopy","_get","set","modified","markChanged","_set","createPropertyProxy","scope","finalized","revoke","revoked","createHiddenProperty","Error","JSON","stringify","hasObjectChanges","keys","hasArrayChanges","getOwnPropertyDescriptor","legacyProxy","freeze","willFinalize","result","baseDraft","needPatches","forEach","markChangesRecursively","object","markChangesSweep","scopes$1","currentScope$1","createDraft$1","drafts","_ref","Proxy","revocable","arrayTraps","objectTraps","proxy","source$1","ownKeys","Reflect","markChanged$1","deleteProperty","owner","setPrototypeOf","fn","arguments","apply","isNaN","parseInt","modernProxy","configDefaults","useProxies","autoFreeze","process","onAssign","onDelete","onCopy","produce","Immer","config","instance","TypeError","classCallCheck","setUseProxies","recipe","patchListener","_this","defaultBase","_len","args","_key","_recipe","finalize","pop","isFrozen","finalizeTree","root","_this2","finalizeProperty","inDraft","patch","_i3","join","Schedule","generateWeeks","rowUpdated","addNewItem","onZoomChanged","itemRemoved","updatedRow","rows","row","findIndex","onScheduleItemUpdated","updatePromise","updatePromiseResponse","console","reason","rowIndex","onScheduleItemRemoved","deletePromise","deletePromiseResponse","s","onScheduleItemCreated","createPromise","createPromiseResponse","newX","timelineWidth","endDate","currentDate","weekNumber","schedule","weekHeader","onChange","max","step","zoomStep","weekStyle","subtitle","imgUrl","App","SCHEDULE_DATA","parse","document","getElementById","textContent","itemUpdatedHandler","Promise","resolve","reject","newEventDays","filterWidth","timelineHeight","dayWidth","ReactDOM"],"mappings":"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","file":"static/js/main.87a854c7.chunk.js","sourcesContent":["import React from 'react'\nimport { Rnd } from \"react-rnd\";\nimport EasyEdit, { Types } from \"react-easy-edit\";\nimport moment from 'moment';\nimport styles from './styles.module.css'\n\n\nclass ScheduleItem extends React.Component {\n    constructor(props) {\n      super(props);\n\n      this.onPositionUpdated = this.onPositionUpdated.bind(this)\n      this.onSizeUpdated = this.onSizeUpdated.bind(this)\n      this.computeStartX = this.computeStartX.bind(this)\n      this.computeStartDate = this.computeStartDate.bind(this)\n      this.computeThread = this.computeThread.bind(this)\n      this.onRightClick = this.onRightClick.bind(this)\n    }\n\n  \n    computeThread(y, grid){\n      var inc = grid.y\n      var thread = Math.ceil(y/inc)\n      return thread\n    }\n\n    computeStartX(startDate, weeks, grid){\n      var startDay = moment(startDate).isoWeekday() - 1 //monday should be 0 (iso week starts on monday.\n                                                        // isoWeekday() returns 1 for monday)\n      var week = weeks.find(o => moment(o.startDate) <= moment(startDate) && moment(startDate) <= moment(o.endDate))\n      var startWeek = weeks.indexOf(week)\n      \n      return (startWeek * 7 + startDay) * grid.x\n    }\n\n    computeStartDate(x, weeks, grid){\n      var inc = grid.x\n      x -= inc/1.1 //this magic number gives the item a preference to snap to the date closest to its left\n\n      var daysInWeek = 7\n      var startsInWeek = Math.floor(Math.ceil(x/inc)/daysInWeek)\n      var startsOnDay = Math.ceil(x/inc) - startsInWeek*daysInWeek\n      var gridStartDate = moment(weeks[0].startDate)\n      var itemStartDate = gridStartDate.add(startsInWeek, 'w').add(startsOnDay, 'd')\n\n      return {startDate: itemStartDate.format('YYYY-MM-DD')}\n    }\n\n    onSizeUpdated(id, size){\n      var inc = this.props.grid.x\n      var newDays = this.props.days + size.widthDelta/inc\n      this.props.onDurationUpdated(id, newDays)\n\n      if(newDays < 1) this.props.onRemoved(id)\n      \n      var start = this.computeStartDate(size.x,this.props.weeks, this.props.grid) // computes start  of event\n      var thread = this.computeThread(size.y, this.props.grid)\n      var position = {\n        startDate: start.startDate,\n        thread: thread,\n      }\n      this.props.onPositionUpdated(id, position)\n    }\n\n    onPositionUpdated(id, position){\n      var start = this.computeStartDate(position.x, this.props.weeks, this.props.grid) // computes start  of event\n      var thread = this.computeThread(position.y, this.props.grid)\n      position.startDate = start.startDate\n      position.thread = thread\n\n      this.props.onPositionUpdated(id, position)\n    }\n\n    onRightClick(e){\n      e.preventDefault();\n\n      var colors = ['#ffc600', '#ff3b30', '#34c759', '#5ac8fa', '#eee', '#af52de']\n      var nextColor = colors[(colors.indexOf(this.props.color)+1) % (colors.length-1)]\n      this.props.onColorUpdated(this.props.id, nextColor)\n    }\n\n    render() {\n      var x = this.computeStartX(this.props.startDate, this.props.weeks, this.props.grid)\n      var y = this.props.thread * this.props.grid.y\n\n      return (\n              <Rnd\n                bounds=\"parent\"\n                onContextMenu={this.onRightClick}\n                onResizeStop={(e, direction, ref, delta, position)=>{\n                  this.onSizeUpdated(this.props.id, {x:position.x, y: position.y, widthDelta: delta.width})\n                }}\n\n                onDragStop={(e,d)=>{\n                  this.onPositionUpdated(this.props.id, {x: d.x, y: d.y, widthDelta: 0})\n                }}\n\n                position={{ x: x, y: y }}\n                enableResizing={{ right: true, left: true }}\n                size={{\n                  width: this.props.grid.x * this.props.days,\n                  height: this.props.grid.y \n                }}\n                dragGrid={[1,1]}\n                resizeGrid={[this.props.grid.x, 1]}\n                className={styles.scheduleItem}\n                  style={{\n                    background: this.props.color,\n                    height: this.props.grid.y,\n                  }}\n              >\n               \n                <div className={styles.scheduleItemDate}>{moment(this.props.startDate).format('dd, D MMM')} ({this.props.days}d)</div>\n                  <EasyEdit\n                      className={styles.scheduleItemInput}\n                      placeholder={this.props.title || ''}\n                      onSave={(e)=>{this.props.onTitleUpdated(this.props.id, e)}}\n                      type={Types.TEXT}\n                      hideSaveButton={true}\n                      hideCancelButton={true}\n                      saveOnBlur={true}\n                      attributes={{ name: \"awesome-input\"}}\n                    />\n                </Rnd>\n        )\n      \n    }\n  }\n\nexport default ScheduleItem;\n","import React from 'react'\nimport ScheduleItem from './ScheduleItem.jsx'\nimport Moment from 'react-moment';\nimport moment from 'moment';\nimport styles from './styles.module.css'\n\nclass ScheduleRow extends React.Component {\n\n    constructor(props) {\n        super(props);\n\n        this.onPositionUpdated=this.onPositionUpdated.bind(this);\n        this.onDurationUpdated=this.onDurationUpdated.bind(this);\n        this.onTitleUpdated=this.onTitleUpdated.bind(this);\n        this.onColorUpdated=this.onColorUpdated.bind(this);\n        this.onRemoved=this.onRemoved.bind(this);\n    }\n\n\n    onRemoved(index){\n      var item = {\n        rowId: this.props.id,\n        itemIndex: index\n      }\n      this.props.itemRemoved((item))\n      this.setState({})\n    }\n    \n    onDurationUpdated(index, duration){\n      var item = {\n        rowId: this.props.id,\n        itemIndex: index,\n        duration: duration \n      }\n\n      this.props.rowUpdated((item))\n    }\n\n    onPositionUpdated(index, dimensions){\n\n      var item = {\n        rowId: this.props.id,\n        itemIndex: index,\n        dimensions: dimensions \n      }\n      this.props.rowUpdated((item))\n    }\n\n    onTitleUpdated(index, title){\n      var item = {\n        rowId: this.props.id,\n        itemIndex: index,\n        title: title\n      }\n      this.props.rowUpdated((item))\n    }\n\n    onColorUpdated(index, color){\n      var item = {\n        rowId: this.props.id,\n        itemIndex: index,\n        color: color\n      }\n      this.props.rowUpdated((item))\n    }\n\n    render() {\n      var style = {\n        height: this.props.threads * this.props.grid.y,\n        width: this.props.grid.width,\n        backgroundSize: this.props.grid.x+'px 100%',\n        left: this.props.grid.filterOffset\n      }\n      \n      return <div style={{display: 'flex'}}>\n              <div className={styles.filter} style={{width: this.props.grid.filterOffset}}>\n                <img src={this.props.imgUrl} className={styles.roundAvatar} alt={this.props.title} />\n                \n                <div className={styles.title}>\n                  <h5>{this.props.title}</h5>\n                  <h6>{this.props.subtitle}</h6>\n                </div>\n              </div>\n\n              <div style={style} className={styles.scheduleRow + ' schedule-row'} id={this.props.id} onDoubleClick={this.props.onRowClicked}>\n                {this.props.items.map((item, i)=>{\n                  return <ScheduleItem\n                            weeks={this.props.weeks}\n                            color={item.color} \n                            grid={this.props.grid} \n                            key={i} \n                            onPositionUpdated={this.onPositionUpdated} \n                            onDurationUpdated={this.onDurationUpdated} \n                            onTitleUpdated={this.onTitleUpdated} \n                            onColorUpdated={this.onColorUpdated} \n                            onRemoved={this.onRemoved} \n                            id={i} \n                            title={item.title} \n                            days={item.days} \n                            startDate={item.startDate} \n                            thread={item.thread}/>\n                })}\n            </div>\n          </div>;\n    }\n  }\n\nexport default ScheduleRow;\n","var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\n\n\n\n\n\n\n\n\n\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\n\n\n\n\nvar defineProperty = function (obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n};\n\nvar NOTHING = typeof Symbol !== \"undefined\" ? Symbol(\"immer-nothing\") : defineProperty({}, \"immer-nothing\", true);\n\nvar DRAFT_STATE = typeof Symbol !== \"undefined\" ? Symbol(\"immer-state\") : \"__$immer_state\";\n\nfunction isDraft(value) {\n    return !!value && !!value[DRAFT_STATE];\n}\n\nfunction isDraftable(value) {\n    if (!value) return false;\n    if ((typeof value === \"undefined\" ? \"undefined\" : _typeof(value)) !== \"object\") return false;\n    if (Array.isArray(value)) return true;\n    var proto = Object.getPrototypeOf(value);\n    return proto === null || proto === Object.prototype;\n}\n\nfunction original(value) {\n    if (value && value[DRAFT_STATE]) {\n        return value[DRAFT_STATE].base;\n    }\n    // otherwise return undefined\n}\n\nvar assign = Object.assign || function assign(target, value) {\n    for (var key in value) {\n        if (has(value, key)) {\n            target[key] = value[key];\n        }\n    }\n    return target;\n};\n\nfunction shallowCopy(value) {\n    if (Array.isArray(value)) return value.slice();\n    var target = value.__proto__ === undefined ? Object.create(null) : {};\n    return assign(target, value);\n}\n\nfunction each(value, cb) {\n    if (Array.isArray(value)) {\n        for (var i = 0; i < value.length; i++) {\n            cb(i, value[i], value);\n        }\n    } else {\n        for (var key in value) {\n            cb(key, value[key], value);\n        }\n    }\n}\n\nfunction has(thing, prop) {\n    return Object.prototype.hasOwnProperty.call(thing, prop);\n}\n\nfunction is(x, y) {\n    // From: https://github.com/facebook/fbjs/blob/c69904a511b900266935168223063dd8772dfc40/packages/fbjs/src/core/shallowEqual.js\n    if (x === y) {\n        return x !== 0 || 1 / x === 1 / y;\n    } else {\n        return x !== x && y !== y;\n    }\n}\n\nfunction generatePatches(state, basePath, patches, inversePatches) {\n    Array.isArray(state.base) ? generateArrayPatches(state, basePath, patches, inversePatches) : generateObjectPatches(state, basePath, patches, inversePatches);\n}\n\nfunction generateArrayPatches(state, basePath, patches, inversePatches) {\n    var base = state.base,\n        copy = state.copy,\n        assigned = state.assigned;\n\n    var minLength = Math.min(base.length, copy.length);\n\n    // Look for replaced indices.\n    for (var i = 0; i < minLength; i++) {\n        if (assigned[i] && base[i] !== copy[i]) {\n            var path = basePath.concat(i);\n            patches.push({ op: \"replace\", path: path, value: copy[i] });\n            inversePatches.push({ op: \"replace\", path: path, value: base[i] });\n        }\n    }\n\n    // Did the array expand?\n    if (minLength < copy.length) {\n        for (var _i = minLength; _i < copy.length; _i++) {\n            patches.push({\n                op: \"add\",\n                path: basePath.concat(_i),\n                value: copy[_i]\n            });\n        }\n        inversePatches.push({\n            op: \"replace\",\n            path: basePath.concat(\"length\"),\n            value: base.length\n        });\n    }\n\n    // ...or did it shrink?\n    else if (minLength < base.length) {\n            patches.push({\n                op: \"replace\",\n                path: basePath.concat(\"length\"),\n                value: copy.length\n            });\n            for (var _i2 = minLength; _i2 < base.length; _i2++) {\n                inversePatches.push({\n                    op: \"add\",\n                    path: basePath.concat(_i2),\n                    value: base[_i2]\n                });\n            }\n        }\n}\n\nfunction generateObjectPatches(state, basePath, patches, inversePatches) {\n    var base = state.base,\n        copy = state.copy;\n\n    each(state.assigned, function (key, assignedValue) {\n        var origValue = base[key];\n        var value = copy[key];\n        var op = !assignedValue ? \"remove\" : key in base ? \"replace\" : \"add\";\n        if (origValue === base && op === \"replace\") return;\n        var path = basePath.concat(key);\n        patches.push(op === \"remove\" ? { op: op, path: path } : { op: op, path: path, value: value });\n        inversePatches.push(op === \"add\" ? { op: \"remove\", path: path } : op === \"remove\" ? { op: \"add\", path: path, value: origValue } : { op: \"replace\", path: path, value: origValue });\n    });\n}\n\nfunction applyPatches(draft, patches) {\n    for (var i = 0; i < patches.length; i++) {\n        var patch = patches[i];\n        var path = patch.path;\n\n        if (path.length === 0 && patch.op === \"replace\") {\n            draft = patch.value;\n        } else {\n            var base = draft;\n            for (var _i3 = 0; _i3 < path.length - 1; _i3++) {\n                base = base[path[_i3]];\n                if (!base || (typeof base === \"undefined\" ? \"undefined\" : _typeof(base)) !== \"object\") throw new Error(\"Cannot apply patch, path doesn't resolve: \" + path.join(\"/\")); // prettier-ignore\n            }\n            var key = path[path.length - 1];\n            switch (patch.op) {\n                case \"replace\":\n                case \"add\":\n                    // TODO: add support is not extensive, it does not support insertion or `-` atm!\n                    base[key] = patch.value;\n                    break;\n                case \"remove\":\n                    if (Array.isArray(base)) {\n                        if (key !== base.length - 1) throw new Error(\"Only the last index of an array can be removed, index: \" + key + \", length: \" + base.length); // prettier-ignore\n                        base.length -= 1;\n                    } else {\n                        delete base[key];\n                    }\n                    break;\n                default:\n                    throw new Error(\"Unsupported patch operation: \" + patch.op);\n            }\n        }\n    }\n    return draft;\n}\n\n// @ts-check\n\nvar descriptors = {};\n\n// For nested produce calls:\nvar scopes = [];\nvar currentScope = function currentScope() {\n    return scopes[scopes.length - 1];\n};\n\nfunction willFinalize(result, baseDraft, needPatches) {\n    var scope = currentScope();\n    scope.forEach(function (state) {\n        return state.finalizing = true;\n    });\n    if (result === undefined || result === baseDraft) {\n        if (needPatches) markChangesRecursively(baseDraft);\n        // This is faster when we don't care about which attributes changed.\n        markChangesSweep(scope);\n    }\n}\n\nfunction createDraft(base, parent) {\n    var draft = void 0;\n    if (isDraft(base)) {\n        var _state = base[DRAFT_STATE];\n        // Avoid creating new drafts when copying.\n        _state.finalizing = true;\n        draft = shallowCopy(_state.draft);\n        _state.finalizing = false;\n    } else {\n        draft = shallowCopy(base);\n    }\n    each(base, function (prop) {\n        Object.defineProperty(draft, \"\" + prop, createPropertyProxy(\"\" + prop));\n    });\n\n    // See \"proxy.js\" for property documentation.\n    var state = {\n        scope: parent ? parent.scope : currentScope(),\n        modified: false,\n        finalizing: false, // es5 only\n        finalized: false,\n        assigned: {},\n        parent: parent,\n        base: base,\n        draft: draft,\n        copy: null,\n        revoke: revoke,\n        revoked: false // es5 only\n    };\n\n    createHiddenProperty(draft, DRAFT_STATE, state);\n    state.scope.push(state);\n    return draft;\n}\n\nfunction revoke() {\n    this.revoked = true;\n}\n\nfunction source(state) {\n    return state.copy || state.base;\n}\n\nfunction _get(state, prop) {\n    assertUnrevoked(state);\n    var value = source(state)[prop];\n    // Drafts are only created for proxyable values that exist in the base state.\n    if (!state.finalizing && value === state.base[prop] && isDraftable(value)) {\n        prepareCopy(state);\n        return state.copy[prop] = createDraft(value, state);\n    }\n    return value;\n}\n\nfunction _set(state, prop, value) {\n    assertUnrevoked(state);\n    state.assigned[prop] = true;\n    if (!state.modified) {\n        if (is(source(state)[prop], value)) return;\n        markChanged(state);\n        prepareCopy(state);\n    }\n    state.copy[prop] = value;\n}\n\nfunction markChanged(state) {\n    if (!state.modified) {\n        state.modified = true;\n        if (state.parent) markChanged(state.parent);\n    }\n}\n\nfunction prepareCopy(state) {\n    if (!state.copy) state.copy = shallowCopy(state.base);\n}\n\nfunction createPropertyProxy(prop) {\n    return descriptors[prop] || (descriptors[prop] = {\n        configurable: true,\n        enumerable: true,\n        get: function get$$1() {\n            return _get(this[DRAFT_STATE], prop);\n        },\n        set: function set$$1(value) {\n            _set(this[DRAFT_STATE], prop, value);\n        }\n    });\n}\n\nfunction assertUnrevoked(state) {\n    if (state.revoked === true) throw new Error(\"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? \" + JSON.stringify(state.copy || state.base));\n}\n\n// This looks expensive, but only proxies are visited, and only objects without known changes are scanned.\nfunction markChangesSweep(scope) {\n    // The natural order of drafts in the `scope` array is based on when they\n    // were accessed. By processing drafts in reverse natural order, we have a\n    // better chance of processing leaf nodes first. When a leaf node is known to\n    // have changed, we can avoid any traversal of its ancestor nodes.\n    for (var i = scope.length - 1; i >= 0; i--) {\n        var state = scope[i];\n        if (state.modified === false) {\n            if (Array.isArray(state.base)) {\n                if (hasArrayChanges(state)) markChanged(state);\n            } else if (hasObjectChanges(state)) markChanged(state);\n        }\n    }\n}\n\nfunction markChangesRecursively(object) {\n    if (!object || (typeof object === \"undefined\" ? \"undefined\" : _typeof(object)) !== \"object\") return;\n    var state = object[DRAFT_STATE];\n    if (!state) return;\n    var base = state.base,\n        draft = state.draft,\n        assigned = state.assigned;\n\n    if (!Array.isArray(object)) {\n        // Look for added keys.\n        Object.keys(draft).forEach(function (key) {\n            // The `undefined` check is a fast path for pre-existing keys.\n            if (base[key] === undefined && !has(base, key)) {\n                assigned[key] = true;\n                markChanged(state);\n            } else if (!assigned[key]) {\n                // Only untouched properties trigger recursion.\n                markChangesRecursively(draft[key]);\n            }\n        });\n        // Look for removed keys.\n        Object.keys(base).forEach(function (key) {\n            // The `undefined` check is a fast path for pre-existing keys.\n            if (draft[key] === undefined && !has(draft, key)) {\n                assigned[key] = false;\n                markChanged(state);\n            }\n        });\n    } else if (hasArrayChanges(state)) {\n        markChanged(state);\n        assigned.length = true;\n        if (draft.length < base.length) {\n            for (var i = draft.length; i < base.length; i++) {\n                assigned[i] = false;\n            }\n        } else {\n            for (var _i = base.length; _i < draft.length; _i++) {\n                assigned[_i] = true;\n            }\n        }\n        for (var _i2 = 0; _i2 < draft.length; _i2++) {\n            // Only untouched indices trigger recursion.\n            if (assigned[_i2] === undefined) markChangesRecursively(draft[_i2]);\n        }\n    }\n}\n\nfunction hasObjectChanges(state) {\n    var base = state.base,\n        draft = state.draft;\n\n    // Search for added keys. Start at the back, because non-numeric keys\n    // are ordered by time of definition on the object.\n\n    var keys = Object.keys(draft);\n    for (var i = keys.length - 1; i >= 0; i--) {\n        // The `undefined` check is a fast path for pre-existing keys.\n        if (base[keys[i]] === undefined && !has(base, keys[i])) {\n            return true;\n        }\n    }\n\n    // Since no keys have been added, we can compare lengths to know if an\n    // object has been deleted.\n    return keys.length !== Object.keys(base).length;\n}\n\nfunction hasArrayChanges(state) {\n    var draft = state.draft;\n\n    if (draft.length !== state.base.length) return true;\n    // See #116\n    // If we first shorten the length, our array interceptors will be removed.\n    // If after that new items are added, result in the same original length,\n    // those last items will have no intercepting property.\n    // So if there is no own descriptor on the last position, we know that items were removed and added\n    // N.B.: splice, unshift, etc only shift values around, but not prop descriptors, so we only have to check\n    // the last one\n    var descriptor = Object.getOwnPropertyDescriptor(draft, draft.length - 1);\n    // descriptor can be null, but only for newly created sparse arrays, eg. new Array(10)\n    if (descriptor && !descriptor.get) return true;\n    // For all other cases, we don't have to compare, as they would have been picked up by the index setters\n    return false;\n}\n\nfunction createHiddenProperty(target, prop, value) {\n    Object.defineProperty(target, prop, {\n        value: value,\n        enumerable: false,\n        writable: true\n    });\n}\n\n\n\nvar legacyProxy = Object.freeze({\n\tscopes: scopes,\n\tcurrentScope: currentScope,\n\twillFinalize: willFinalize,\n\tcreateDraft: createDraft\n});\n\n// @ts-check\n\n// For nested produce calls:\nvar scopes$1 = [];\nvar currentScope$1 = function currentScope() {\n    return scopes$1[scopes$1.length - 1];\n};\n\n// Do nothing before being finalized.\nfunction willFinalize$1() {}\n\nfunction createDraft$1(base, parent) {\n    var state = {\n        // Track which produce call this is associated with.\n        scope: parent ? parent.scope : currentScope$1(),\n        // True for both shallow and deep changes.\n        modified: false,\n        // Used during finalization.\n        finalized: false,\n        // Track which properties have been assigned (true) or deleted (false).\n        assigned: {},\n        // The parent draft state.\n        parent: parent,\n        // The base state.\n        base: base,\n        // The base proxy.\n        draft: null,\n        // Any property proxies.\n        drafts: {},\n        // The base copy with any updated values.\n        copy: null,\n        // Called by the `produce` function.\n        revoke: null\n    };\n\n    var _ref = Array.isArray(base) ? Proxy.revocable([state], arrayTraps) : Proxy.revocable(state, objectTraps),\n        revoke = _ref.revoke,\n        proxy = _ref.proxy;\n\n    state.draft = proxy;\n    state.revoke = revoke;\n\n    state.scope.push(state);\n    return proxy;\n}\n\nvar objectTraps = {\n    get: get$1,\n    has: function has$$1(target, prop) {\n        return prop in source$1(target);\n    },\n    ownKeys: function ownKeys(target) {\n        return Reflect.ownKeys(source$1(target));\n    },\n\n    set: set$1,\n    deleteProperty: deleteProperty,\n    getOwnPropertyDescriptor: getOwnPropertyDescriptor,\n    defineProperty: defineProperty$1,\n    setPrototypeOf: function setPrototypeOf() {\n        throw new Error(\"Immer does not support `setPrototypeOf()`.\");\n    }\n};\n\nvar arrayTraps = {};\neach(objectTraps, function (key, fn) {\n    arrayTraps[key] = function () {\n        arguments[0] = arguments[0][0];\n        return fn.apply(this, arguments);\n    };\n});\narrayTraps.deleteProperty = function (state, prop) {\n    if (isNaN(parseInt(prop))) throw new Error(\"Immer does not support deleting properties from arrays: \" + prop);\n    return objectTraps.deleteProperty.call(this, state[0], prop);\n};\narrayTraps.set = function (state, prop, value) {\n    if (prop !== \"length\" && isNaN(parseInt(prop))) throw new Error(\"Immer does not support setting non-numeric properties on arrays: \" + prop);\n    return objectTraps.set.call(this, state[0], prop, value);\n};\n\nfunction source$1(state) {\n    return state.copy || state.base;\n}\n\nfunction get$1(state, prop) {\n    if (prop === DRAFT_STATE) return state;\n    var drafts = state.drafts;\n\n    // Check for existing draft in unmodified state.\n\n    if (!state.modified && has(drafts, prop)) {\n        return drafts[prop];\n    }\n\n    var value = source$1(state)[prop];\n    if (state.finalized || !isDraftable(value)) return value;\n\n    // Check for existing draft in modified state.\n    if (state.modified) {\n        // Assigned values are never drafted. This catches any drafts we created, too.\n        if (value !== state.base[prop]) return value;\n        // Store drafts on the copy (when one exists).\n        drafts = state.copy;\n    }\n\n    return drafts[prop] = createDraft$1(value, state);\n}\n\nfunction set$1(state, prop, value) {\n    if (!state.modified) {\n        // Optimize based on value's truthiness. Truthy values are guaranteed to\n        // never be undefined, so we can avoid the `in` operator. Lastly, truthy\n        // values may be drafts, but falsy values are never drafts.\n        var isUnchanged = value ? is(state.base[prop], value) || value === state.drafts[prop] : is(state.base[prop], value) && prop in state.base;\n        if (isUnchanged) return true;\n        markChanged$1(state);\n    }\n    state.assigned[prop] = true;\n    state.copy[prop] = value;\n    return true;\n}\n\nfunction deleteProperty(state, prop) {\n    // The `undefined` check is a fast path for pre-existing keys.\n    if (state.base[prop] !== undefined || prop in state.base) {\n        state.assigned[prop] = false;\n        markChanged$1(state);\n    }\n    if (state.copy) delete state.copy[prop];\n    return true;\n}\n\nfunction getOwnPropertyDescriptor(state, prop) {\n    var owner = state.modified ? state.copy : has(state.drafts, prop) ? state.drafts : state.base;\n    var descriptor = Reflect.getOwnPropertyDescriptor(owner, prop);\n    if (descriptor && !(Array.isArray(owner) && prop === \"length\")) descriptor.configurable = true;\n    return descriptor;\n}\n\nfunction defineProperty$1() {\n    throw new Error(\"Immer does not support defining properties on draft objects.\");\n}\n\nfunction markChanged$1(state) {\n    if (!state.modified) {\n        state.modified = true;\n        state.copy = assign(shallowCopy(state.base), state.drafts);\n        state.drafts = null;\n        if (state.parent) markChanged$1(state.parent);\n    }\n}\n\nvar modernProxy = Object.freeze({\n\tscopes: scopes$1,\n\tcurrentScope: currentScope$1,\n\twillFinalize: willFinalize$1,\n\tcreateDraft: createDraft$1\n});\n\nfunction verifyMinified() {}\n\nvar configDefaults = {\n    useProxies: typeof Proxy !== \"undefined\" && typeof Reflect !== \"undefined\",\n    autoFreeze: typeof process !== \"undefined\" ? process.env.NODE_ENV !== \"production\" : verifyMinified.name === \"verifyMinified\",\n    onAssign: null,\n    onDelete: null,\n    onCopy: null\n};\n\nvar Immer = function () {\n    function Immer(config) {\n        classCallCheck(this, Immer);\n\n        assign(this, configDefaults, config);\n        this.setUseProxies(this.useProxies);\n        this.produce = this.produce.bind(this);\n    }\n\n    createClass(Immer, [{\n        key: \"produce\",\n        value: function produce(base, recipe, patchListener) {\n            var _this = this;\n\n            // curried invocation\n            if (typeof base === \"function\" && typeof recipe !== \"function\") {\n                var defaultBase = recipe;\n                recipe = base;\n\n                // prettier-ignore\n                return function () {\n                    for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n                        args[_key - 1] = arguments[_key];\n                    }\n\n                    var base = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : defaultBase;\n                    return _this.produce(base, function (draft) {\n                        var _recipe;\n\n                        return (_recipe = recipe).call.apply(_recipe, [draft, draft].concat(args));\n                    });\n                };\n            }\n\n            // prettier-ignore\n            {\n                if (typeof recipe !== \"function\") throw new Error(\"if first argument is not a function, the second argument to produce should be a function\");\n                if (patchListener !== undefined && typeof patchListener !== \"function\") throw new Error(\"the third argument of a producer should not be set or a function\");\n            }\n\n            var result = void 0;\n            // Only create proxies for plain objects/arrays.\n            if (!isDraftable(base)) {\n                result = recipe(base);\n                if (result === undefined) return base;\n            }\n            // See #100, don't nest producers\n            else if (isDraft(base)) {\n                    result = recipe.call(base, base);\n                    if (result === undefined) return base;\n                }\n                // The given value must be proxied.\n                else {\n                        this.scopes.push([]);\n                        var baseDraft = this.createDraft(base);\n                        try {\n                            result = recipe.call(baseDraft, baseDraft);\n                            this.willFinalize(result, baseDraft, !!patchListener);\n\n                            // Never generate patches when no listener exists.\n                            var patches = patchListener && [],\n                                inversePatches = patchListener && [];\n\n                            // Finalize the modified draft...\n                            if (result === undefined || result === baseDraft) {\n                                result = this.finalize(baseDraft, [], patches, inversePatches);\n                            }\n                            // ...or use a replacement value.\n                            else {\n                                    // Users must never modify the draft _and_ return something else.\n                                    if (baseDraft[DRAFT_STATE].modified) throw new Error(\"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.\"); // prettier-ignore\n\n                                    // Finalize the replacement in case it contains (or is) a subset of the draft.\n                                    if (isDraftable(result)) result = this.finalize(result);\n\n                                    if (patchListener) {\n                                        patches.push({\n                                            op: \"replace\",\n                                            path: [],\n                                            value: result\n                                        });\n                                        inversePatches.push({\n                                            op: \"replace\",\n                                            path: [],\n                                            value: base\n                                        });\n                                    }\n                                }\n                        } finally {\n                            this.currentScope().forEach(function (state) {\n                                return state.revoke();\n                            });\n                            this.scopes.pop();\n                        }\n                        patchListener && patchListener(patches, inversePatches);\n                    }\n            // Normalize the result.\n            return result === NOTHING ? undefined : result;\n        }\n    }, {\n        key: \"setAutoFreeze\",\n        value: function setAutoFreeze(value) {\n            this.autoFreeze = value;\n        }\n    }, {\n        key: \"setUseProxies\",\n        value: function setUseProxies(value) {\n            this.useProxies = value;\n            assign(this, value ? modernProxy : legacyProxy);\n        }\n        /**\n         * @internal\n         * Finalize a draft, returning either the unmodified base state or a modified\n         * copy of the base state.\n         */\n\n    }, {\n        key: \"finalize\",\n        value: function finalize(draft, path, patches, inversePatches) {\n            var state = draft[DRAFT_STATE];\n            if (!state) {\n                if (Object.isFrozen(draft)) return draft;\n                return this.finalizeTree(draft);\n            }\n            // Never finalize drafts owned by an outer scope.\n            if (state.scope !== this.currentScope()) {\n                return draft;\n            }\n            if (!state.modified) return state.base;\n            if (!state.finalized) {\n                state.finalized = true;\n                this.finalizeTree(state.draft, path, patches, inversePatches);\n                if (this.onDelete) {\n                    var assigned = state.assigned;\n\n                    for (var prop in assigned) {\n                        assigned[prop] || this.onDelete(state, prop);\n                    }\n                }\n                if (this.onCopy) this.onCopy(state);\n\n                // Nested producers must never auto-freeze their result,\n                // because it may contain drafts from parent producers.\n                if (this.autoFreeze && this.scopes.length === 1) {\n                    Object.freeze(state.copy);\n                }\n\n                if (patches) generatePatches(state, path, patches, inversePatches);\n            }\n            return state.copy;\n        }\n        /**\n         * @internal\n         * Finalize all drafts in the given state tree.\n         */\n\n    }, {\n        key: \"finalizeTree\",\n        value: function finalizeTree(root, path, patches, inversePatches) {\n            var _this2 = this;\n\n            var state = root[DRAFT_STATE];\n            if (state) {\n                root = this.useProxies ? state.copy : state.copy = shallowCopy(state.draft);\n            }\n\n            var onAssign = this.onAssign;\n\n            var finalizeProperty = function finalizeProperty(prop, value, parent) {\n                // Only `root` can be a draft in here.\n                var inDraft = !!state && parent === root;\n\n                if (isDraft(value)) {\n                    // prettier-ignore\n                    parent[prop] = value =\n                    // Patches are never generated for assigned properties.\n                    patches && inDraft && !state.assigned[prop] ? _this2.finalize(value, path.concat(prop), patches, inversePatches) : _this2.finalize(value);\n\n                    // Unchanged drafts are ignored.\n                    if (inDraft && value === state.base[prop]) return;\n                }\n                // Unchanged draft properties are ignored.\n                else if (inDraft && is(value, state.base[prop])) {\n                        return;\n                    }\n                    // Search new objects for unfinalized drafts. Frozen objects should never contain drafts.\n                    else if (isDraftable(value) && !Object.isFrozen(value)) {\n                            each(value, finalizeProperty);\n                        }\n\n                if (inDraft && onAssign) {\n                    onAssign(state, prop, value);\n                }\n            };\n\n            each(root, finalizeProperty);\n            return root;\n        }\n    }]);\n    return Immer;\n}();\n\nvar immer = new Immer();\n\n/**\n * The `produce` function takes a value and a \"recipe function\" (whose\n * return value often depends on the base state). The recipe function is\n * free to mutate its first argument however it wants. All mutations are\n * only ever applied to a __copy__ of the base state.\n *\n * Pass only a function to create a \"curried producer\" which relieves you\n * from passing the recipe function every time.\n *\n * Only plain objects and arrays are made mutable. All other objects are\n * considered uncopyable.\n *\n * Note: This function is __bound__ to its `Immer` instance.\n *\n * @param {any} base - the initial state\n * @param {Function} producer - function that receives a proxy of the base state as first argument and which can be freely modified\n * @param {Function} patchListener - optional function that will be called with all the patches produced here\n * @returns {any} a new state, or the initial state if nothing was modified\n */\nvar produce = immer.produce;\n/**\n * Pass true to automatically freeze all copies created by Immer.\n *\n * By default, auto-freezing is disabled in production.\n */\nvar setAutoFreeze = function setAutoFreeze(value) {\n  return immer.setAutoFreeze(value);\n};\n\n/**\n * Pass true to use the ES2015 `Proxy` class when creating drafts, which is\n * always faster than using ES5 proxies.\n *\n * By default, feature detection is used, so calling this is rarely necessary.\n */\nvar setUseProxies = function setUseProxies(value) {\n  return immer.setUseProxies(value);\n};\n\n/**\n * Apply an array of Immer patches to the first argument.\n *\n * This function is a producer, which means copy-on-write is in effect.\n */\nvar applyPatches$1 = produce(applyPatches);\n\nexport { produce, setAutoFreeze, setUseProxies, applyPatches$1 as applyPatches, Immer, original, isDraft, NOTHING as nothing };\nexport default produce;\n//# sourceMappingURL=immer.module.js.map\n","import React from 'react'\nimport ScheduleItem from './ScheduleItem.jsx';\nimport ScheduleRow from './ScheduleRow.jsx'\nimport Moment from 'react-moment';\nimport moment from 'moment';\nimport { current } from 'immer';\nimport axios from 'axios';\nimport styles from './styles.module.css'\n\nclass Schedule extends React.Component {\n    constructor(props) {\n        super(props);\n\n        var weeks = this.generateWeeks(props.startDate, props.endDate)\n\n        this.state = {\n          'grid': {\n            filterOffset: props.filterWidth,\n            y: props.timelineHeight, x: props.dayWidth,  //y: pixels per timeline, x: pixels per day\n            'startDate': props.startDate,\n            'endDate': props.endDate,\n            'width':  props.dayWidth * weeks.length * 7\n          },\n          'rows': props.rows,\n          'weeks': weeks\n        };\n\n        this.rowUpdated=this.rowUpdated.bind(this);\n        this.addNewItem=this.addNewItem.bind(this);\n        this.onZoomChanged=this.onZoomChanged.bind(this);\n        this.itemRemoved=this.itemRemoved.bind(this);\n    }\n\n    rowUpdated(updatedRow){\n      var rows = JSON.parse(JSON.stringify(this.state.rows))\n      var row = JSON.parse(JSON.stringify(updatedRow))\n      var rowIndex = this.state.rows.findIndex(o=>o.id == row.rowId) \n      var item = rows[rowIndex]['items'][row.itemIndex]\n\n      if(item == undefined) return;\n\n      if(row.dimensions != undefined){\n        item.startDate = row.dimensions.startDate\n        item.thread = row.dimensions.thread\n\n      }\n\n      if(row.title != undefined){\n        item.title = row.title \n      }\n\n      if(row.duration != undefined){\n        item.days = row.duration \n      }\n\n      if(row.color != undefined){\n        item.color = row.color \n      }\n\n      if(this.props.onScheduleItemUpdated){\n        var updatePromise = this.props.onScheduleItemUpdated(item)\n\n        updatePromise.then((updatePromiseResponse)=>{\n          console.log(\"updating schedule item\")\n        }, reason => {\n          // rejection\n          console.error(\"couldnt update event\", reason)\n        })\n      }\n\n      this.setState({rows: rows})\n    }\n\n    itemRemoved(row){\n      var rows = JSON.parse(JSON.stringify(this.state.rows))\n      var rowIndex = this.state.rows.findIndex(o=>o.id == row.rowId) \n      var item = rows[rowIndex]['items'][row.itemIndex]\n\n      //save changes\n      if(this.props.onScheduleItemRemoved){\n        var deletePromise = this.props.onScheduleItemRemoved(item)\n        \n        deletePromise.then((deletePromiseResponse)=>{\n          console.log(\"deleting on server\")\n          //delete item\n          rows[rowIndex]['items'].splice(row.itemIndex, 1);\n          this.setState({rows: rows})\n        }, reason => {\n          console.error(\"couldnt delete event\", reason)\n        })\n      }else{\n        //delete item\n        rows[rowIndex]['items'].splice(row.itemIndex, 1);\n        this.setState({rows: rows})\n      }\n\n    }\n\n    addNewItem(e){\n      if(e.target.className.indexOf('schedule-row') > 0){\n\n        var bounds = e.target.getBoundingClientRect()\n        var headerHeight = 50 //height of the week title header\n        var y = e.clientY - bounds.y - headerHeight\n        var x = e.clientX - bounds.x - this.state.grid.x \n        x+= this.state.grid.x/1.1 //this undoes the magic number in computeStartDate\n\n        var rowId = e.target.id\n        var rowIndex = this.state.rows.findIndex(o=>o.id == rowId) \n        \n        var s = new ScheduleItem()\n        var start = s.computeStartDate(x, this.state.weeks, this.state.grid)\n        var thread = s.computeThread(y, this.state.grid)\n        \n        var rows = [...this.state.rows]\n        var row = {\n          startDate: start.startDate,\n          days: this.props.newEventDays,\n          color: '#eee',\n          title: 'New event',\n          thread: thread\n        }\n\n        //save changes\n        if(this.props.onScheduleItemCreated){\n          var createPromise = this.props.onScheduleItemCreated(rowId, row)\n\n          createPromise.then((createPromiseResponse)=>{\n            row.id = createPromiseResponse.id\n            rows[rowIndex]['items'].push(row)\n            this.setState({rows: rows})\n          }, reason => {\n            // rejection\n            console.error(\"couldnt create event\", reason)\n          })\n        }else{\n          rows[rowIndex]['items'].push(row)\n          this.setState({rows: rows})\n        }\n\n      }\n      \n    }\n\n    onZoomChanged(e){\n      var newX = e.target.value\n      var timelineWidth = newX * this.state.weeks.length * 7\n      this.setState({'grid': {...this.state.grid,  width: timelineWidth, x: newX}})\n    }\n\n    generateWeeks(startDate, endDate){\n      //iso weeks start on monday\n      var weeks = []\n      var gridStartDate = moment(startDate)\n      var currentDate = gridStartDate.add(1-gridStartDate.day(),'d') //gets date of the start of the week of startDate\n\n      while(currentDate < moment(endDate)){\n        weeks.push({\n          weekNumber: moment(currentDate).isoWeek(),\n          startDate: moment(currentDate),\n          endDate: moment(currentDate).add(6, 'd')\n        })\n        currentDate = currentDate.add(7, 'd')\n      }\n\n      return weeks\n    }\n\n    render() {\n      return <div className={styles.schedule}>\n\n          <div className={styles.weekHeader} >\n            <div className={styles.zoom} style={{width: this.state.grid.filterOffset}}>\n              <input onChange={this.onZoomChanged} value={this.state.grid.x} \n                     id=\"zoom\" type=\"range\" min={this.props.zoomMin} max={this.props.zoomMax} \n                     step={this.props.zoomStep}  \n              /> \n            </div>\n\n            {this.state.weeks.map((week, i)=>{\n              var weekStyle = {\n                width: 7*this.state.grid.x\n              } \n\n              if (week.weekNumber == moment().isoWeek()){\n                weekStyle.fontWeight = 'bold'\n                weekStyle.background = '#efefef'\n              }\n\n              return <div key={i} style={weekStyle}>\n                      {week.weekNumber}<br /> \n\n                      {this.state.grid.x > 15 &&\n                        <span>\n                        {week.startDate.format('MMM D')} - {week.endDate.format('D')}\n                        </span>\n                      }\n                    </div>\n\n            })}\n          </div>\n\n          {this.state.rows.map((row, i) => {\n\n            return <ScheduleRow \n                    title={row.title}\n                    subtitle={row.subtitle}\n                    imgUrl={row.imgUrl}\n                    weeks={this.state.weeks} \n                    onRowClicked={this.addNewItem} \n                    grid={this.state.grid} \n                    key={i} \n                    id={row.id} \n                    items={row.items} \n                    threads={row.threads} \n                    itemRemoved={this.itemRemoved}\n                    rowUpdated={this.rowUpdated} />\n          })}\n        \n        </div>\n    }\n  }\n\nexport default Schedule;\n","import React from 'react'\nimport { Schedule } from 'react-horizontal-schedule'\nimport 'react-horizontal-schedule/dist/index.css'\n\nconst App = () => {\n\n  const SCHEDULE_DATA = JSON.parse(document.getElementById('schedule-data').textContent);\n\n  const itemCreatedHandler = function(rowId, item){\n    return new Promise((resolve, reject)=>{\n      resolve({id:98}) //return an object with id like this if you want to assign the id to a created item\n    })\n  }\n\n  const itemUpdatedHandler = function(item){\n    return new Promise((resolve, reject)=>{\n      resolve()\n    })\n  }\n\n  return <Schedule \n          onScheduleItemCreated={itemCreatedHandler}\n          onScheduleItemUpdated={itemUpdatedHandler}\n          onScheduleItemRemoved={itemUpdatedHandler}\n          newEventDays={4}\n          filterWidth={250}\n          startDate={SCHEDULE_DATA.startDate}\n          endDate={SCHEDULE_DATA.endDate}\n          timelineHeight={SCHEDULE_DATA.timelineHeight}\n          dayWidth={SCHEDULE_DATA.dayWidth}\n          rows={SCHEDULE_DATA.rows}\n        />\n}\n\nexport default App\n","import './index.css'\n\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}