(this["webpackJsonpreact-horizontal-schedule-example"]=this["webpackJsonpreact-horizontal-schedule-example"]||[]).push([[0],{22:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return $}));var i=r(4),n=r(0),o=r.n(n),a=r(25),s=r(9),d=r.n(s),p=r(1),l=r.n(p),u=(r(39),r(24)),h=r.n(u),c={schedule:"_styles-module__schedule__igxG4",scheduleRow:"_styles-module__scheduleRow__1efr6",weekHeader:"_styles-module__weekHeader__3HBxs",scheduleItem:"_styles-module__scheduleItem__2ke3f",scheduleItemDate:"_styles-module__scheduleItemDate__13zdv","easy-edit-wrapper":"_styles-module__easy-edit-wrapper__2OEUq",filter:"_styles-module__filter__22Znc",title:"_styles-module__title__2KezC",roundAvatar:"_styles-module__roundAvatar__2YIVN"};class f extends o.a.Component{constructor(e){super(e),this.state={},this.onPositionUpdated=this.onPositionUpdated.bind(this),this.onSizeUpdated=this.onSizeUpdated.bind(this),this.computeStartX=this.computeStartX.bind(this),this.computeStartDate=this.computeStartDate.bind(this),this.computeThread=this.computeThread.bind(this)}computeThread(e,t){var r=t.y;return Math.ceil(e/r)}computeStartX(e,t,r){var i=l()(e).isoWeekday()-1,n=t.find(t=>l()(t.startDate)<=l()(e)&&l()(e)<=l()(t.endDate));return(7*t.indexOf(n)+i)*r.x}computeStartDate(e,t,r){var i=r.x,n=Math.floor(Math.ceil(e/i)/7),o=Math.ceil(e/i)-7*n;return{startDate:l()(t[0].startDate).add(n,"w").add(o,"d").format("YYYY-MM-DD")}}onSizeUpdated(e,t){var r=this.props.grid.x,i=this.props.days+t.widthDelta/r;this.props.onDurationUpdated(e,i);var n=this.computeStartDate(t.x,this.props.weeks,this.props.grid),o=this.computeThread(t.y,this.props.grid),a={startDate:n.startDate,thread:o};this.props.onPositionUpdated(e,a)}onPositionUpdated(e,t){var r=this.computeStartDate(t.x,this.props.weeks,this.props.grid),i=this.computeThread(t.y,this.props.grid);t.startDate=r.startDate,t.thread=i,this.props.onPositionUpdated(e,t)}render(){var e=this.computeStartX(this.props.startDate,this.props.weeks,this.props.grid),t=this.props.thread*this.props.grid.y;return o.a.createElement(a.a,{bounds:"parent",onResizeStop:(e,t,r,i,n)=>{this.onSizeUpdated(this.props.id,{x:n.x,y:n.y,widthDelta:i.width})},onDragStop:(e,t)=>{this.onPositionUpdated(this.props.id,{x:t.x,y:t.y,widthDelta:0})},position:{x:e,y:t},enableResizing:{top:!1,right:!0,bottom:!1,left:!0,topRight:!1,bottomRight:!1,bottomLeft:!1,topLeft:!1},size:{width:this.props.grid.x*this.props.days,height:this.props.grid.y},dragGrid:[1,1],resizeGrid:[this.props.grid.x,1]},o.a.createElement("div",{className:c.scheduleItem,style:{background:this.props.color,height:this.props.grid.y,userSelect:"none",overflow:"none",padding:3,border:"1px solid white",borderRadius:"5px",fontSize:"10px"}},o.a.createElement("div",{className:c.scheduleItemDate},l()(this.props.startDate).format("D MMM")," for ",this.props.days,"d"),o.a.createElement("div",null,o.a.createElement(d.a,{className:c.scheduleItemInput,placeholder:this.props.title,onSave:e=>{this.props.onTitleUpdated(this.props.id,e)},type:s.Types.TEXT,hideSaveButton:!0,hideCancelButton:!0,saveOnBlur:!0,attributes:{name:"awesome-input",id:1}}))))}}class m extends o.a.Component{constructor(e){super(e),this.onPositionUpdated=this.onPositionUpdated.bind(this),this.onDurationUpdated=this.onDurationUpdated.bind(this),this.onTitleUpdated=this.onTitleUpdated.bind(this)}onDurationUpdated(e,t){var r={rowIndex:this.props.id,itemIndex:e,duration:t};this.props.rowUpdated(r)}onPositionUpdated(e,t){var r={rowIndex:this.props.id,itemIndex:e,dimensions:t};this.props.rowUpdated(r)}onTitleUpdated(e,t){var r={rowIndex:this.props.id,itemIndex:e,title:t};this.props.rowUpdated(r)}render(){var e={borderBottom:"1px solid #eee",position:"relative",height:this.props.threads*this.props.grid.y,width:this.props.grid.width};return o.a.createElement("div",{style:{display:"flex"}},o.a.createElement("div",{className:c.filter,style:{display:"flex",flexShrink:0,width:this.props.grid.filterOffset}},o.a.createElement("img",{src:this.props.imgUrl,className:c.roundAvatar,alt:this.props.title}),o.a.createElement("div",{className:c.title},o.a.createElement("h5",null,this.props.title),o.a.createElement("h6",null,this.props.subtitle))),o.a.createElement("div",{className:c.scheduleRow+" schedule-row",id:this.props.id,onDoubleClick:this.props.onRowClicked,style:e},this.props.items.map((e,t)=>o.a.createElement(f,{weeks:this.props.weeks,color:e.color,grid:this.props.grid,key:t,onPositionUpdated:this.onPositionUpdated,onDurationUpdated:this.onDurationUpdated,onTitleUpdated:this.onTitleUpdated,id:t,title:e.title,days:e.days,startDate:e.startDate,thread:e.thread}))))}}var y,v,g,w="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),x="undefined"!==typeof Symbol?Symbol("immer-nothing"):(g=!0,(v="immer-nothing")in(y={})?Object.defineProperty(y,v,{value:g,enumerable:!0,configurable:!0,writable:!0}):y[v]=g,y),D="undefined"!==typeof Symbol?Symbol("immer-state"):"__$immer_state";function _(e){return!!e&&!!e[D]}function k(e){if(!e)return!1;if("object"!==("undefined"===typeof e?"undefined":w(e)))return!1;if(Array.isArray(e))return!0;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}var z=Object.assign||function(e,t){for(var r in t)S(t,r)&&(e[r]=t[r]);return e};function E(e){if(Array.isArray(e))return e.slice();var t=void 0===e.__proto__?Object.create(null):{};return z(t,e)}function U(e,t){if(Array.isArray(e))for(var r=0;r<e.length;r++)t(r,e[r],e);else for(var i in e)t(i,e[i],e)}function S(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function O(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}function I(e,t,r,i){Array.isArray(e.base)?function(e,t,r,i){for(var n=e.base,o=e.copy,a=e.assigned,s=Math.min(n.length,o.length),d=0;d<s;d++)if(a[d]&&n[d]!==o[d]){var p=t.concat(d);r.push({op:"replace",path:p,value:o[d]}),i.push({op:"replace",path:p,value:n[d]})}if(s<o.length){for(var l=s;l<o.length;l++)r.push({op:"add",path:t.concat(l),value:o[l]});i.push({op:"replace",path:t.concat("length"),value:n.length})}else if(s<n.length){r.push({op:"replace",path:t.concat("length"),value:o.length});for(var u=s;u<n.length;u++)i.push({op:"add",path:t.concat(u),value:n[u]})}}(e,t,r,i):function(e,t,r,i){var n=e.base,o=e.copy;U(e.assigned,(function(e,a){var s=n[e],d=o[e],p=a?e in n?"replace":"add":"remove";if(s!==n||"replace"!==p){var l=t.concat(e);r.push("remove"===p?{op:p,path:l}:{op:p,path:l,value:d}),i.push("add"===p?{op:"remove",path:l}:"remove"===p?{op:"add",path:l,value:s}:{op:"replace",path:l,value:s})}}))}(e,t,r,i)}var P={},j=[],A=function(){return j[j.length-1]};function N(e,t){var r=void 0;if(_(e)){var i=e[D];i.finalizing=!0,r=E(i.draft),i.finalizing=!1}else r=E(e);U(e,(function(e){Object.defineProperty(r,""+e,function(e){return P[e]||(P[e]={configurable:!0,enumerable:!0,get:function(){return function(e,t){F(e);var r=T(e)[t];if(!e.finalizing&&r===e.base[t]&&k(r))return R(e),e.copy[t]=N(r,e);return r}(this[D],e)},set:function(t){!function(e,t,r){if(F(e),e.assigned[t]=!0,!e.modified){if(O(T(e)[t],r))return;M(e),R(e)}e.copy[t]=r}(this[D],e,t)}})}(""+e))}));var n={scope:t?t.scope:A(),modified:!1,finalizing:!1,finalized:!1,assigned:{},parent:t,base:e,draft:r,copy:null,revoke:C,revoked:!1};return function(e,t,r){Object.defineProperty(e,t,{value:r,enumerable:!1,writable:!0})}(r,D,n),n.scope.push(n),r}function C(){this.revoked=!0}function T(e){return e.copy||e.base}function M(e){e.modified||(e.modified=!0,e.parent&&M(e.parent))}function R(e){e.copy||(e.copy=E(e.base))}function F(e){if(!0===e.revoked)throw new Error("Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+JSON.stringify(e.copy||e.base))}function B(e){for(var t=e.base,r=e.draft,i=Object.keys(r),n=i.length-1;n>=0;n--)if(void 0===t[i[n]]&&!S(t,i[n]))return!0;return i.length!==Object.keys(t).length}function W(e){var t=e.draft;if(t.length!==e.base.length)return!0;var r=Object.getOwnPropertyDescriptor(t,t.length-1);return!(!r||r.get)}var H=Object.freeze({scopes:j,currentScope:A,willFinalize:function(e,t,r){var i=A();i.forEach((function(e){return e.finalizing=!0})),void 0!==e&&e!==t||(r&&function e(t){if(!t||"object"!==("undefined"===typeof t?"undefined":w(t)))return;var r=t[D];if(!r)return;var i=r.base,n=r.draft,o=r.assigned;if(Array.isArray(t)){if(W(r)){if(M(r),o.length=!0,n.length<i.length)for(var a=n.length;a<i.length;a++)o[a]=!1;else for(var s=i.length;s<n.length;s++)o[s]=!0;for(var d=0;d<n.length;d++)void 0===o[d]&&e(n[d])}}else Object.keys(n).forEach((function(t){void 0!==i[t]||S(i,t)?o[t]||e(n[t]):(o[t]=!0,M(r))})),Object.keys(i).forEach((function(e){void 0!==n[e]||S(n,e)||(o[e]=!1,M(r))}))}(t),function(e){for(var t=e.length-1;t>=0;t--){var r=e[t];!1===r.modified&&(Array.isArray(r.base)?W(r)&&M(r):B(r)&&M(r))}}(i))},createDraft:N}),X=[],Y=function(){return X[X.length-1]};function Z(e,t){var r={scope:t?t.scope:Y(),modified:!1,finalized:!1,assigned:{},parent:t,base:e,draft:null,drafts:{},copy:null,revoke:null},i=Array.isArray(e)?Proxy.revocable([r],G):Proxy.revocable(r,J),n=i.revoke,o=i.proxy;return r.draft=o,r.revoke=n,r.scope.push(r),o}var J={get:function(e,t){if(t===D)return e;var r=e.drafts;if(!e.modified&&S(r,t))return r[t];var i=K(e)[t];if(e.finalized||!k(i))return i;if(e.modified){if(i!==e.base[t])return i;r=e.copy}return r[t]=Z(i,e)},has:function(e,t){return t in K(e)},ownKeys:function(e){return Reflect.ownKeys(K(e))},set:function(e,t,r){if(!e.modified){if(r?O(e.base[t],r)||r===e.drafts[t]:O(e.base[t],r)&&t in e.base)return!0;L(e)}return e.assigned[t]=!0,e.copy[t]=r,!0},deleteProperty:function(e,t){(void 0!==e.base[t]||t in e.base)&&(e.assigned[t]=!1,L(e));e.copy&&delete e.copy[t];return!0},getOwnPropertyDescriptor:function(e,t){var r=e.modified?e.copy:S(e.drafts,t)?e.drafts:e.base,i=Reflect.getOwnPropertyDescriptor(r,t);!i||Array.isArray(r)&&"length"===t||(i.configurable=!0);return i},defineProperty:function(){throw new Error("Immer does not support defining properties on draft objects.")},setPrototypeOf:function(){throw new Error("Immer does not support `setPrototypeOf()`.")}},G={};function K(e){return e.copy||e.base}function L(e){e.modified||(e.modified=!0,e.copy=z(E(e.base),e.drafts),e.drafts=null,e.parent&&L(e.parent))}U(J,(function(e,t){G[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),G.deleteProperty=function(e,t){if(isNaN(parseInt(t)))throw new Error("Immer does not support deleting properties from arrays: "+t);return J.deleteProperty.call(this,e[0],t)},G.set=function(e,t,r){if("length"!==t&&isNaN(parseInt(t)))throw new Error("Immer does not support setting non-numeric properties on arrays: "+t);return J.set.call(this,e[0],t,r)};var q=Object.freeze({scopes:X,currentScope:Y,willFinalize:function(){},createDraft:Z});var V={useProxies:"undefined"!==typeof Proxy&&"undefined"!==typeof Reflect,autoFreeze:"undefined"===typeof e&&"verifyMinified"===function(){}.name,onAssign:null,onDelete:null,onCopy:null};(0,(new(function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),z(this,V,t),this.setUseProxies(this.useProxies),this.produce=this.produce.bind(this)}return b(e,[{key:"produce",value:function(e,t,r){var i=this;if("function"===typeof e&&"function"!==typeof t){var n=t;return t=e,function(){for(var e=arguments.length,r=Array(e>1?e-1:0),o=1;o<e;o++)r[o-1]=arguments[o];var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n;return i.produce(a,(function(e){var i;return(i=t).call.apply(i,[e,e].concat(r))}))}}if("function"!==typeof t)throw new Error("if first argument is not a function, the second argument to produce should be a function");if(void 0!==r&&"function"!==typeof r)throw new Error("the third argument of a producer should not be set or a function");var o=void 0;if(k(e))if(_(e)){if(void 0===(o=t.call(e,e)))return e}else{this.scopes.push([]);var a=this.createDraft(e);try{o=t.call(a,a),this.willFinalize(o,a,!!r);var s=r&&[],d=r&&[];if(void 0===o||o===a)o=this.finalize(a,[],s,d);else{if(a[D].modified)throw new Error("An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.");k(o)&&(o=this.finalize(o)),r&&(s.push({op:"replace",path:[],value:o}),d.push({op:"replace",path:[],value:e}))}}finally{this.currentScope().forEach((function(e){return e.revoke()})),this.scopes.pop()}r&&r(s,d)}else if(void 0===(o=t(e)))return e;return o===x?void 0:o}},{key:"setAutoFreeze",value:function(e){this.autoFreeze=e}},{key:"setUseProxies",value:function(e){this.useProxies=e,z(this,e?q:H)}},{key:"finalize",value:function(e,t,r,i){var n=e[D];if(!n)return Object.isFrozen(e)?e:this.finalizeTree(e);if(n.scope!==this.currentScope())return e;if(!n.modified)return n.base;if(!n.finalized){if(n.finalized=!0,this.finalizeTree(n.draft,t,r,i),this.onDelete){var o=n.assigned;for(var a in o)o[a]||this.onDelete(n,a)}this.onCopy&&this.onCopy(n),this.autoFreeze&&1===this.scopes.length&&Object.freeze(n.copy),r&&I(n,t,r,i)}return n.copy}},{key:"finalizeTree",value:function(e,t,r,i){var n=this,o=e[D];o&&(e=this.useProxies?o.copy:o.copy=E(o.draft));var a=this.onAssign;return U(e,(function s(d,p,l){var u=!!o&&l===e;if(_(p)){if(l[d]=p=r&&u&&!o.assigned[d]?n.finalize(p,t.concat(d),r,i):n.finalize(p),u&&p===o.base[d])return}else{if(u&&O(p,o.base[d]))return;k(p)&&!Object.isFrozen(p)&&U(p,s)}u&&a&&a(o,d,p)})),e}}]),e}())).produce)((function(e,t){for(var r=0;r<t.length;r++){var i=t[r],n=i.path;if(0===n.length&&"replace"===i.op)e=i.value;else{for(var o=e,a=0;a<n.length-1;a++)if(!(o=o[n[a]])||"object"!==("undefined"===typeof o?"undefined":w(o)))throw new Error("Cannot apply patch, path doesn't resolve: "+n.join("/"));var s=n[n.length-1];switch(i.op){case"replace":case"add":o[s]=i.value;break;case"remove":if(Array.isArray(o)){if(s!==o.length-1)throw new Error("Only the last index of an array can be removed, index: "+s+", length: "+o.length);o.length-=1}else delete o[s];break;default:throw new Error("Unsupported patch operation: "+i.op)}}}return e}));class $ extends o.a.Component{constructor(e){super(e),this.state={grid:{filterOffset:e.filterWidth,y:e.timelineHeight,x:e.dayWidth,startDate:e.startDate,endDate:e.endDate},rows:e.rows},this.rowUpdated=this.rowUpdated.bind(this),this.addNewItem=this.addNewItem.bind(this),this.onZoomChanged=this.onZoomChanged.bind(this)}rowUpdated(e){var t=[...this.state.rows];void 0!=e.dimensions&&(t[e.rowIndex].items[e.itemIndex].startDate=e.dimensions.startDate,t[e.rowIndex].items[e.itemIndex].thread=e.dimensions.thread,0==t[e.rowIndex].items[e.itemIndex].days&&delete t[e.rowIndex].items[e.itemIndex]),void 0!=e.title&&(t[e.rowIndex].items[e.itemIndex].title=e.title),void 0!=e.duration&&(t[e.rowIndex].items[e.itemIndex].days=e.duration),this.props.postUrl&&h.a.post(this.props.postUrl,{rows:t}).then(e=>{console.log(e),console.log(e.data)}),this.setState({rows:t})}addNewItem(e){if(e.target.className.indexOf("schedule-row")>0){var t=e.target.getBoundingClientRect(),r=e.clientY-t.y-50,i=e.clientX-t.x,n=e.target.id,o=new f,a=o.computeStartDate(i,this.state.weeks,this.state.grid),s=o.computeThread(r,this.state.grid),d=[...this.state.rows],p={startDate:a.startDate,days:3,color:"#eee",title:"New event",thread:s};d[n].items.push(p),this.setState({rows:d})}}onZoomChanged(e){var t=e.target.value,r=t*this.state.weeks.length*7;this.setState({grid:Object(i.a)(Object(i.a)({},this.state.grid),{},{width:r,x:t})})}componentWillMount(){for(var e=[],t=l()(this.state.grid.startDate),r=t.add(1-t.day(),"d");r<l()(this.state.grid.endDate);)e.push({weekNumber:l()(r).isoWeek(),startDate:l()(r),endDate:l()(r).add(6,"d")}),r=r.add(7,"d");var n=this.state.grid.x*e.length*7;this.setState({grid:Object(i.a)(Object(i.a)({},this.state.grid),{},{width:n})}),this.setState({weeks:e})}render(){return o.a.createElement("div",{className:c.schedule},o.a.createElement("div",{className:c.weekHeader},o.a.createElement("div",{style:{width:this.state.grid.filterOffset}},o.a.createElement("input",{onChange:this.onZoomChanged,value:this.state.grid.x,id:"zoom",type:"range",min:"5",max:"50",step:"5"})),this.state.weeks.map((e,t)=>o.a.createElement("div",{key:t,style:{width:7*this.state.grid.x}},e.weekNumber,o.a.createElement("br",null),this.state.grid.x>15&&o.a.createElement("span",null,e.startDate.format("MMM D")," - ",e.endDate.format("D"))))),this.state.rows.map((e,t)=>o.a.createElement(m,{title:e.title,subtitle:e.subtitle,imgUrl:e.imgUrl,weeks:this.state.weeks,onRowClicked:this.addNewItem,grid:this.state.grid,key:t,id:t,items:e.items,threads:e.threads,rowUpdated:this.rowUpdated})))}}}).call(this,r(11))},26:function(e,t,r){e.exports=r(58)},27:function(e,t,r){},57:function(e,t,r){},58:function(e,t,r){"use strict";r.r(t);r(27);var i=r(0),n=r.n(i),o=r(6),a=r.n(o),s=r(22);r(57);var d=()=>{const e=JSON.parse(document.getElementById("schedule-data").textContent);return n.a.createElement(s.a,{filterWidth:250,startDate:e.startDate,endDate:e.endDate,timelineHeight:e.timelineHeight,dayWidth:e.dayWidth,rows:e.rows})};a.a.render(n.a.createElement(d,null),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.ae97261b.chunk.js.map