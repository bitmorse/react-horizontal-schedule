(this["webpackJsonpreact-horizontal-schedule-example"]=this["webpackJsonpreact-horizontal-schedule-example"]||[]).push([[0],{21:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return ee}));var n=r(0),i=r.n(n),o=r(24),a=r(8),s=r.n(a),d=r(1),p=r.n(d),u=(r(38),r(23)),c=r.n(u);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function f(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var m,y,v,g={schedule:"_igxG4",scheduleRow:"_1efr6",weekHeader:"_3HBxs",scheduleItem:"_2ke3f",scheduleItemDate:"_13zdv","easy-edit-wrapper":"_2OEUq",filter:"_22Znc",title:"_2KezC",roundAvatar:"_2YIVN"},b=function(e){function t(t){var r;return(r=e.call(this,t)||this).state={},r.onPositionUpdated=r.onPositionUpdated.bind(h(r)),r.onSizeUpdated=r.onSizeUpdated.bind(h(r)),r.computeStartX=r.computeStartX.bind(h(r)),r.computeStartDate=r.computeStartDate.bind(h(r)),r.computeThread=r.computeThread.bind(h(r)),r}f(t,e);var r=t.prototype;return r.computeThread=function(e,t){var r=t.y;return Math.ceil(e/r)},r.computeStartX=function(e,t,r){var n=p()(e).isoWeekday()-1,i=t.find((function(t){return p()(t.startDate)<=p()(e)&&p()(e)<=p()(t.endDate)}));return(7*t.indexOf(i)+n)*r.x},r.computeStartDate=function(e,t){e+=1;var r=t.x,n=Math.floor(Math.ceil(e/r)/7),i=Math.ceil(e/r)-7*n,o=p()(t.startDate).week();return{startDate:p()().week(o).add(i,"d").add(n,"w").format("YYYY-MM-DD")}},r.onSizeUpdated=function(e,t){var r=this.props.grid.x,n=this.props.days+t.widthDelta/r;this.props.onDurationUpdated(e,n);var i=this.computeStartDate(t.x,this.props.grid),o=this.computeThread(t.y,this.props.grid),a={startDate:i.startDate,thread:o};this.props.onPositionUpdated(e,a)},r.onPositionUpdated=function(e,t){var r=this.computeStartDate(t.x,this.props.grid),n=this.computeThread(t.y,this.props.grid);t.startDate=r.startDate,t.thread=n,this.props.onPositionUpdated(e,t)},r.render=function(){var e=this,t=this.computeStartX(this.props.startDate,this.props.weeks,this.props.grid),r=this.props.thread*this.props.grid.y;return i.a.createElement(o.a,{bounds:"parent",onResizeStop:function(t,r,n,i,o){e.onSizeUpdated(e.props.id,{x:o.x,y:o.y,widthDelta:i.width})},onDragStop:function(t,r){e.onPositionUpdated(e.props.id,{x:r.x,y:r.y,widthDelta:0})},position:{x:t,y:r},enableResizing:{top:!1,right:!0,bottom:!1,left:!0,topRight:!1,bottomRight:!1,bottomLeft:!1,topLeft:!1},size:{width:this.props.grid.x*this.props.days,height:this.props.grid.y},dragGrid:[1,1],resizeGrid:[this.props.grid.x,1]},i.a.createElement("div",{className:g.scheduleItem,style:{background:this.props.color,height:this.props.grid.y,userSelect:"none",overflow:"none",padding:3,border:"1px solid white",borderRadius:"5px",fontSize:"10px"}},i.a.createElement("div",{className:g.scheduleItemDate},p()(this.props.startDate).format("D MMM")," for ",this.props.days,"d"),i.a.createElement("div",null,i.a.createElement(s.a,{className:g.scheduleItemInput,placeholder:this.props.title,onSave:function(t){e.props.onTitleUpdated(e.props.id,t)},type:a.Types.TEXT,hideSaveButton:!0,hideCancelButton:!0,saveOnBlur:!0,attributes:{name:"awesome-input",id:1}}))))},t}(i.a.Component),w=function(e){function t(t){var r;return(r=e.call(this,t)||this).onPositionUpdated=r.onPositionUpdated.bind(h(r)),r.onDurationUpdated=r.onDurationUpdated.bind(h(r)),r.onTitleUpdated=r.onTitleUpdated.bind(h(r)),r}f(t,e);var r=t.prototype;return r.onDurationUpdated=function(e,t){var r={rowIndex:this.props.id,itemIndex:e,duration:t};this.props.rowUpdated(r)},r.onPositionUpdated=function(e,t){var r={rowIndex:this.props.id,itemIndex:e,dimensions:t};this.props.rowUpdated(r)},r.onTitleUpdated=function(e,t){var r={rowIndex:this.props.id,itemIndex:e,title:t};this.props.rowUpdated(r)},r.render=function(){var e=this,t={borderBottom:"1px solid #eee",position:"relative",height:this.props.threads*this.props.grid.y,width:this.props.grid.width};return i.a.createElement("div",{style:{display:"flex"}},i.a.createElement("div",{className:g.filter,style:{display:"flex",flexShrink:0,width:this.props.grid.filterOffset}},i.a.createElement("img",{src:this.props.imgUrl,className:g.roundAvatar,alt:this.props.title}),i.a.createElement("div",{className:g.title},i.a.createElement("h5",null,this.props.title),i.a.createElement("h6",null,this.props.subtitle))),i.a.createElement("div",{className:g.scheduleRow+" schedule-row",id:this.props.id,onDoubleClick:this.props.onRowClicked,style:t},this.props.items.map((function(t,r){return i.a.createElement(b,{weeks:e.props.weeks,color:t.color,grid:e.props.grid,key:r,onPositionUpdated:e.onPositionUpdated,onDurationUpdated:e.onDurationUpdated,onTitleUpdated:e.onTitleUpdated,id:r,title:t.title,days:t.days,startDate:t.startDate,thread:t.thread})}))))},t}(i.a.Component),x="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),k="undefined"!==typeof Symbol?Symbol("immer-nothing"):(v=!0,(y="immer-nothing")in(m={})?Object.defineProperty(m,y,{value:v,enumerable:!0,configurable:!0,writable:!0}):m[y]=v,m),E="undefined"!==typeof Symbol?Symbol("immer-state"):"__$immer_state";function z(e){return!!e&&!!e[E]}function U(e){if(!e)return!1;if("object"!==("undefined"===typeof e?"undefined":x(e)))return!1;if(Array.isArray(e))return!0;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}var S=Object.assign||function(e,t){for(var r in t)P(t,r)&&(e[r]=t[r]);return e};function O(e){if(Array.isArray(e))return e.slice();var t=void 0===e.__proto__?Object.create(null):{};return S(t,e)}function I(e,t){if(Array.isArray(e))for(var r=0;r<e.length;r++)t(r,e[r],e);else for(var n in e)t(n,e[n],e)}function P(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function j(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}function A(e,t,r,n){Array.isArray(e.base)?function(e,t,r,n){for(var i=e.base,o=e.copy,a=e.assigned,s=Math.min(i.length,o.length),d=0;d<s;d++)if(a[d]&&i[d]!==o[d]){var p=t.concat(d);r.push({op:"replace",path:p,value:o[d]}),n.push({op:"replace",path:p,value:i[d]})}if(s<o.length){for(var u=s;u<o.length;u++)r.push({op:"add",path:t.concat(u),value:o[u]});n.push({op:"replace",path:t.concat("length"),value:i.length})}else if(s<i.length){r.push({op:"replace",path:t.concat("length"),value:o.length});for(var c=s;c<i.length;c++)n.push({op:"add",path:t.concat(c),value:i[c]})}}(e,t,r,n):function(e,t,r,n){var i=e.base,o=e.copy;I(e.assigned,(function(e,a){var s=i[e],d=o[e],p=a?e in i?"replace":"add":"remove";if(s!==i||"replace"!==p){var u=t.concat(e);r.push("remove"===p?{op:p,path:u}:{op:p,path:u,value:d}),n.push("add"===p?{op:"remove",path:u}:"remove"===p?{op:"add",path:u,value:s}:{op:"replace",path:u,value:s})}}))}(e,t,r,n)}var N={},C=[],_=function(){return C[C.length-1]};function T(e,t){var r=void 0;if(z(e)){var n=e[E];n.finalizing=!0,r=O(n.draft),n.finalizing=!1}else r=O(e);I(e,(function(e){Object.defineProperty(r,""+e,function(e){return N[e]||(N[e]={configurable:!0,enumerable:!0,get:function(){return function(e,t){W(e);var r=R(e)[t];if(!e.finalizing&&r===e.base[t]&&U(r))return B(e),e.copy[t]=T(r,e);return r}(this[E],e)},set:function(t){!function(e,t,r){if(W(e),e.assigned[t]=!0,!e.modified){if(j(R(e)[t],r))return;F(e),B(e)}e.copy[t]=r}(this[E],e,t)}})}(""+e))}));var i={scope:t?t.scope:_(),modified:!1,finalizing:!1,finalized:!1,assigned:{},parent:t,base:e,draft:r,copy:null,revoke:M,revoked:!1};return function(e,t,r){Object.defineProperty(e,t,{value:r,enumerable:!1,writable:!0})}(r,E,i),i.scope.push(i),r}function M(){this.revoked=!0}function R(e){return e.copy||e.base}function F(e){e.modified||(e.modified=!0,e.parent&&F(e.parent))}function B(e){e.copy||(e.copy=O(e.base))}function W(e){if(!0===e.revoked)throw new Error("Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+JSON.stringify(e.copy||e.base))}function H(e){for(var t=e.base,r=e.draft,n=Object.keys(r),i=n.length-1;i>=0;i--)if(void 0===t[n[i]]&&!P(t,n[i]))return!0;return n.length!==Object.keys(t).length}function X(e){var t=e.draft;if(t.length!==e.base.length)return!0;var r=Object.getOwnPropertyDescriptor(t,t.length-1);return!(!r||r.get)}var Y=Object.freeze({scopes:C,currentScope:_,willFinalize:function(e,t,r){var n=_();n.forEach((function(e){return e.finalizing=!0})),void 0!==e&&e!==t||(r&&function e(t){if(!t||"object"!==("undefined"===typeof t?"undefined":x(t)))return;var r=t[E];if(!r)return;var n=r.base,i=r.draft,o=r.assigned;if(Array.isArray(t)){if(X(r)){if(F(r),o.length=!0,i.length<n.length)for(var a=i.length;a<n.length;a++)o[a]=!1;else for(var s=n.length;s<i.length;s++)o[s]=!0;for(var d=0;d<i.length;d++)void 0===o[d]&&e(i[d])}}else Object.keys(i).forEach((function(t){void 0!==n[t]||P(n,t)?o[t]||e(i[t]):(o[t]=!0,F(r))})),Object.keys(n).forEach((function(e){void 0!==i[e]||P(i,e)||(o[e]=!1,F(r))}))}(t),function(e){for(var t=e.length-1;t>=0;t--){var r=e[t];!1===r.modified&&(Array.isArray(r.base)?X(r)&&F(r):H(r)&&F(r))}}(n))},createDraft:T}),Z=[],J=function(){return Z[Z.length-1]};function G(e,t){var r={scope:t?t.scope:J(),modified:!1,finalized:!1,assigned:{},parent:t,base:e,draft:null,drafts:{},copy:null,revoke:null},n=Array.isArray(e)?Proxy.revocable([r],L):Proxy.revocable(r,K),i=n.revoke,o=n.proxy;return r.draft=o,r.revoke=i,r.scope.push(r),o}var K={get:function(e,t){if(t===E)return e;var r=e.drafts;if(!e.modified&&P(r,t))return r[t];var n=q(e)[t];if(e.finalized||!U(n))return n;if(e.modified){if(n!==e.base[t])return n;r=e.copy}return r[t]=G(n,e)},has:function(e,t){return t in q(e)},ownKeys:function(e){return Reflect.ownKeys(q(e))},set:function(e,t,r){if(!e.modified){if(r?j(e.base[t],r)||r===e.drafts[t]:j(e.base[t],r)&&t in e.base)return!0;V(e)}return e.assigned[t]=!0,e.copy[t]=r,!0},deleteProperty:function(e,t){(void 0!==e.base[t]||t in e.base)&&(e.assigned[t]=!1,V(e));e.copy&&delete e.copy[t];return!0},getOwnPropertyDescriptor:function(e,t){var r=e.modified?e.copy:P(e.drafts,t)?e.drafts:e.base,n=Reflect.getOwnPropertyDescriptor(r,t);!n||Array.isArray(r)&&"length"===t||(n.configurable=!0);return n},defineProperty:function(){throw new Error("Immer does not support defining properties on draft objects.")},setPrototypeOf:function(){throw new Error("Immer does not support `setPrototypeOf()`.")}},L={};function q(e){return e.copy||e.base}function V(e){e.modified||(e.modified=!0,e.copy=S(O(e.base),e.drafts),e.drafts=null,e.parent&&V(e.parent))}I(K,(function(e,t){L[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),L.deleteProperty=function(e,t){if(isNaN(parseInt(t)))throw new Error("Immer does not support deleting properties from arrays: "+t);return K.deleteProperty.call(this,e[0],t)},L.set=function(e,t,r){if("length"!==t&&isNaN(parseInt(t)))throw new Error("Immer does not support setting non-numeric properties on arrays: "+t);return K.set.call(this,e[0],t,r)};var $=Object.freeze({scopes:Z,currentScope:J,willFinalize:function(){},createDraft:G});var Q={useProxies:"undefined"!==typeof Proxy&&"undefined"!==typeof Reflect,autoFreeze:"undefined"===typeof e&&"verifyMinified"===function(){}.name,onAssign:null,onDelete:null,onCopy:null},ee=((0,(new(function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),S(this,Q,t),this.setUseProxies(this.useProxies),this.produce=this.produce.bind(this)}return D(e,[{key:"produce",value:function(e,t,r){var n=this;if("function"===typeof e&&"function"!==typeof t){var i=t;return t=e,function(){for(var e=arguments.length,r=Array(e>1?e-1:0),o=1;o<e;o++)r[o-1]=arguments[o];var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;return n.produce(a,(function(e){var n;return(n=t).call.apply(n,[e,e].concat(r))}))}}if("function"!==typeof t)throw new Error("if first argument is not a function, the second argument to produce should be a function");if(void 0!==r&&"function"!==typeof r)throw new Error("the third argument of a producer should not be set or a function");var o=void 0;if(U(e))if(z(e)){if(void 0===(o=t.call(e,e)))return e}else{this.scopes.push([]);var a=this.createDraft(e);try{o=t.call(a,a),this.willFinalize(o,a,!!r);var s=r&&[],d=r&&[];if(void 0===o||o===a)o=this.finalize(a,[],s,d);else{if(a[E].modified)throw new Error("An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.");U(o)&&(o=this.finalize(o)),r&&(s.push({op:"replace",path:[],value:o}),d.push({op:"replace",path:[],value:e}))}}finally{this.currentScope().forEach((function(e){return e.revoke()})),this.scopes.pop()}r&&r(s,d)}else if(void 0===(o=t(e)))return e;return o===k?void 0:o}},{key:"setAutoFreeze",value:function(e){this.autoFreeze=e}},{key:"setUseProxies",value:function(e){this.useProxies=e,S(this,e?$:Y)}},{key:"finalize",value:function(e,t,r,n){var i=e[E];if(!i)return Object.isFrozen(e)?e:this.finalizeTree(e);if(i.scope!==this.currentScope())return e;if(!i.modified)return i.base;if(!i.finalized){if(i.finalized=!0,this.finalizeTree(i.draft,t,r,n),this.onDelete){var o=i.assigned;for(var a in o)o[a]||this.onDelete(i,a)}this.onCopy&&this.onCopy(i),this.autoFreeze&&1===this.scopes.length&&Object.freeze(i.copy),r&&A(i,t,r,n)}return i.copy}},{key:"finalizeTree",value:function(e,t,r,n){var i=this,o=e[E];o&&(e=this.useProxies?o.copy:o.copy=O(o.draft));var a=this.onAssign;return I(e,(function s(d,p,u){var c=!!o&&u===e;if(z(p)){if(u[d]=p=r&&c&&!o.assigned[d]?i.finalize(p,t.concat(d),r,n):i.finalize(p),c&&p===o.base[d])return}else{if(c&&j(p,o.base[d]))return;U(p)&&!Object.isFrozen(p)&&I(p,s)}c&&a&&a(o,d,p)})),e}}]),e}())).produce)((function(e,t){for(var r=0;r<t.length;r++){var n=t[r],i=n.path;if(0===i.length&&"replace"===n.op)e=n.value;else{for(var o=e,a=0;a<i.length-1;a++)if(!(o=o[i[a]])||"object"!==("undefined"===typeof o?"undefined":x(o)))throw new Error("Cannot apply patch, path doesn't resolve: "+i.join("/"));var s=i[i.length-1];switch(n.op){case"replace":case"add":o[s]=n.value;break;case"remove":if(Array.isArray(o)){if(s!==o.length-1)throw new Error("Only the last index of an array can be removed, index: "+s+", length: "+o.length);o.length-=1}else delete o[s];break;default:throw new Error("Unsupported patch operation: "+n.op)}}}return e})),function(e){function t(t){var r;return(r=e.call(this,t)||this).state={grid:{filterOffset:t.filterWidth,y:t.timelineHeight,x:t.dayWidth,startDate:t.startDate,endDate:t.endDate},rows:t.rows},r.rowUpdated=r.rowUpdated.bind(h(r)),r.addNewItem=r.addNewItem.bind(h(r)),r.onZoomChanged=r.onZoomChanged.bind(h(r)),r}f(t,e);var r=t.prototype;return r.rowUpdated=function(e){var t=[].concat(this.state.rows);void 0!=e.dimensions&&(t[e.rowIndex].items[e.itemIndex].startDate=e.dimensions.startDate,t[e.rowIndex].items[e.itemIndex].thread=e.dimensions.thread,0==t[e.rowIndex].items[e.itemIndex].days&&delete t[e.rowIndex].items[e.itemIndex]),void 0!=e.title&&(t[e.rowIndex].items[e.itemIndex].title=e.title),void 0!=e.duration&&(t[e.rowIndex].items[e.itemIndex].days=e.duration),this.props.postUrl&&c.a.post(this.props.postUrl,{rows:t}).then((function(e){console.log(e),console.log(e.data)})),this.setState({rows:t})},r.addNewItem=function(e){if(e.target.className.indexOf("scheduleRow")>0){var t=e.target.getBoundingClientRect(),r=e.clientY-t.y-50,n=e.clientX-t.x,i=e.target.id,o=new b,a=o.computeStartDate(n,this.state.grid),s=o.computeThread(r,this.state.grid),d=[].concat(this.state.rows),p={startDate:a.startDate,days:3,color:"#eee",title:"New event",thread:s};d[i].items.push(p),this.setState({rows:d})}},r.onZoomChanged=function(e){var t=e.target.value,r=t*this.state.weeks.length*7;this.setState({grid:l({},this.state.grid,{width:r,x:t})})},r.componentWillMount=function(){for(var e=[],t=p()(this.state.grid.startDate),r=t.add(1-t.day(),"d");r<p()(this.state.grid.endDate);)e.push({weekNumber:p()(r).isoWeek(),startDate:p()(r),endDate:p()(r).add(6,"d")}),r=r.add(7,"d");var n=this.state.grid.x*e.length*7;this.setState({grid:l({},this.state.grid,{width:n})}),this.setState({weeks:e})},r.render=function(){var e=this;return i.a.createElement("div",{className:g.schedule},i.a.createElement("div",{className:g.weekHeader},i.a.createElement("div",{style:{width:this.state.grid.filterOffset}},i.a.createElement("input",{onChange:this.onZoomChanged,value:this.state.grid.x,id:"zoom",type:"range",min:"5",max:"50",step:"5"})),this.state.weeks.map((function(t,r){return i.a.createElement("div",{key:r,style:{width:7*e.state.grid.x}},t.weekNumber,i.a.createElement("br",null),e.state.grid.x>15&&i.a.createElement("span",null,t.startDate.format("MMM D")," - ",t.endDate.format("D")))}))),this.state.rows.map((function(t,r){return i.a.createElement(w,{title:t.title,subtitle:t.subtitle,imgUrl:t.imgUrl,weeks:e.state.weeks,onRowClicked:e.addNewItem,grid:e.state.grid,key:r,id:r,items:t.items,threads:t.threads,rowUpdated:e.rowUpdated})})))},t}(i.a.Component))}).call(this,r(10))},25:function(e,t,r){e.exports=r(57)},26:function(e,t,r){},56:function(e,t,r){},57:function(e,t,r){"use strict";r.r(t);r(26);var n=r(0),i=r.n(n),o=r(5),a=r.n(o),s=r(21);r(56);var d=()=>{const e=JSON.parse(document.getElementById("schedule-data").textContent);return i.a.createElement(s.a,{filterWidth:250,startDate:e.startDate,endDate:e.endDate,timelineHeight:e.timelineHeight,dayWidth:e.dayWidth,rows:e.rows})};a.a.render(i.a.createElement(d,null),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.1f1779d2.chunk.js.map